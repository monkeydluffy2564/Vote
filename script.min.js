const _0x50c9f1=_0x5c6a;(function(_0x47ec2c,_0x57d6fa){const _0x563f9b=_0x5c6a,_0x148ad3=_0x47ec2c();while(!![]){try{const _0x794683=parseInt(_0x563f9b(0x102))/0x1+parseInt(_0x563f9b(0xf6))/0x2*(-parseInt(_0x563f9b(0x120))/0x3)+parseInt(_0x563f9b(0x114))/0x4*(parseInt(_0x563f9b(0xf9))/0x5)+parseInt(_0x563f9b(0x138))/0x6*(-parseInt(_0x563f9b(0x128))/0x7)+-parseInt(_0x563f9b(0x173))/0x8+-parseInt(_0x563f9b(0x190))/0x9+-parseInt(_0x563f9b(0x144))/0xa*(-parseInt(_0x563f9b(0x180))/0xb);if(_0x794683===_0x57d6fa)break;else _0x148ad3['push'](_0x148ad3['shift']());}catch(_0xad103f){_0x148ad3['push'](_0x148ad3['shift']());}}}(_0x5e50,0x87224));function _0x5e50(){const _0x39f308=['dashboard-topic','admin-login-view','admin-password','opacity-50','3598064ygjEHT','single','#F6E05E','/public/data/voting_sessions/','data','split','length','#9D6C5B','innerHTML','</p>','#8C8C8C','click','custom','407qTQQjT','multiple','text-red-500','voter-vote-error','admin-view','#F6AD55','voter-pin-entry','uid','appendChild','pin-input','message','addEventListener','close-poll-btn','#6B46C1','.view','#F9D896','4132386ckfdsu','#C79D9D','#D05353','รอบโหวตสิ้นสุดลงแล้ว','round','cursor-not-allowed','voter-error','topic','442CpRZBi','block','Error\x20joining\x20poll:','10gbcAmz','กรุณากำหนดตัวเลือกอย่างน้อย\x202\x20ข้อ\x20(สูงสุด\x20','options','admin-login-error','Authentication\x20Error:','#9F80A0','#D79F9F','#F56565','voter-view','361443VwXruP','จำนวนโหวต','เห็นด้วย','poll-topic','#4299E1','yes-no','#FDD5B1','borderColor','vote-restriction','#9F7AEA','#EB4966','none','admin-dashboard','voter-options-container','disabled','destroy','start-poll-btn','#E3AF86','766188MOCYYb','\x20ตัวเลือก)','dashboard-pin','รอบโหวตนี้ปิดไปแล้ว','mouseenter','รหัสผ่านไม่ถูกต้อง','className','loading-view','remove','forEach','#ECC94B','เกิดข้อผิดพลาดในการเชื่อมต่อ','8433sHcGLv','style','#E53E3E','slice','.voter-option-btn','createElement','querySelectorAll','กำหนดตัวเลือกได้สูงสุด\x20','399YYDqSh','2741','กรุณาใส่หัวข้อโหวต','รอบโหวตสิ้นสุดลง','hidden','voteRestriction','voter-topic','#805AD5','custom-options-textarea','#7FB7BE','#667EEA','รอบโหวตปิดแล้ว','admin-login-trigger','#A0AEC0','trim','getElementById','91794czLYZD','#C53030','add','log','random','voter-voting-area','poll-type','isActive','#F3AD74','flex','เกิดข้อผิดพลาดในการส่งโหวต\x20กรุณาลองอีกครั้ง','#D69E2E','597610shijmC','value','map','/artifacts/','voter-back-pin-btn','error','display','#ED8936','โหวตสำเร็จ!','voter-message-title','boxShadow','target','คุณได้ส่งคะแนนโหวตของคุณในรอบนี้แล้ว','text-blue-500','#5BBFBA','ไม่พบ\x20PIN\x20นี้\x20หรือรอบโหวตปิดแล้ว','undefined','User\x20authenticated\x20with\x20UID:','Error\x20casting\x20vote:','floor','debug','classList','<h1\x20class=\x22text-2xl\x20font-bold\x20text-red-600\x22>Authentication\x20Failed</h1><p>','ไม่เห็นด้วย','textContent','#D53F8C','default-app-id','mouseleave','PIN\x20ต้องมี\x204\x20หลัก','admin-error','#F8C87A','admin-login-close-btn','voters','voter-message-body','#B3C8CC','admin-logout-btn','inline-block','admin-login-submit-btn','exists','0\x204px\x206px\x20-1px\x20rgba(0,\x200,\x200,\x200.1),\x200\x202px\x204px\x20-1px\x20rgba(0,\x200,\x200,\x200.06),\x20inset\x200\x20-3px\x200\x20rgba(0,0,0,0.2)','custom-options-container','backgroundColor','toString'];_0x5e50=function(){return _0x39f308;};return _0x5e50();}import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,signInWithCustomToken,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,updateDoc,onSnapshot,increment,arrayUnion,setLogLevel}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';const userProvidedConfig='{\x22apiKey\x22:\x22AIzaSyBHmJ7M5qf20lKPTB9_aE2Ppa0-jTryuuI\x22,\x22authDomain\x22:\x22programpp-91f08.firebaseapp.com\x22,\x22projectId\x22:\x22programpp-91f08\x22,\x22storageBucket\x22:\x22programpp-91f08.firebasestorage.app\x22,\x22messagingSenderId\x22:\x22415403943738\x22,\x22appId\x22:\x221:415403943738:web:f56ec72de49f81f0315203\x22,\x22measurementId\x22:\x22G-W19QNQQR25\x22}',firebaseConfig=JSON['parse'](typeof __firebase_config!==_0x50c9f1(0x154)?__firebase_config:userProvidedConfig),appId=typeof __app_id!==_0x50c9f1(0x154)?__app_id:_0x50c9f1(0x15e),app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app);setLogLevel(_0x50c9f1(0x158));let userId=null,currentAdminSessionPath=null,currentAdminListener=null,currentVoterSessionPath=null,currentVoterListener=null,chartInstance=null;const ADMIN_PASSWORD=_0x50c9f1(0x129),colors=[_0x50c9f1(0x106),_0x50c9f1(0x100),'#48BB78',_0x50c9f1(0x11e),_0x50c9f1(0x10b),_0x50c9f1(0x14b),_0x50c9f1(0x135),_0x50c9f1(0x185),_0x50c9f1(0x132),_0x50c9f1(0x122),'#38B2AC',_0x50c9f1(0x143),_0x50c9f1(0x12f),_0x50c9f1(0x15d),'#4FD1C5',_0x50c9f1(0x175),_0x50c9f1(0x18d),_0x50c9f1(0x139),'#3F729B',_0x50c9f1(0x140),_0x50c9f1(0xfe),_0x50c9f1(0x10c),_0x50c9f1(0x152),'#F7B75F',_0x50c9f1(0x17a),_0x50c9f1(0x192),_0x50c9f1(0x131),_0x50c9f1(0x162),_0x50c9f1(0x191),'#E27857','#8FC0A9',_0x50c9f1(0x18f),_0x50c9f1(0x17d),'#B38E8E','#93A8AC',_0x50c9f1(0x113),'#A1B0AB',_0x50c9f1(0xff),_0x50c9f1(0x166),_0x50c9f1(0x108)],views=document['querySelectorAll'](_0x50c9f1(0x18e)),loadingView=document[_0x50c9f1(0x137)](_0x50c9f1(0x11b)),adminView=document[_0x50c9f1(0x137)](_0x50c9f1(0x184)),voterView=document['getElementById']('voter-view'),adminCreatePoll=document[_0x50c9f1(0x137)]('admin-create-poll'),adminDashboard=document[_0x50c9f1(0x137)](_0x50c9f1(0x10e)),pollTopicInput=document[_0x50c9f1(0x137)](_0x50c9f1(0x105)),pollTypeSelect=document[_0x50c9f1(0x137)](_0x50c9f1(0x13e)),voteRestrictionSelect=document[_0x50c9f1(0x137)](_0x50c9f1(0x10a)),customOptionsContainer=document[_0x50c9f1(0x137)](_0x50c9f1(0x16c)),customOptionsTextarea=document[_0x50c9f1(0x137)](_0x50c9f1(0x130)),startPollBtn=document[_0x50c9f1(0x137)](_0x50c9f1(0x112)),adminError=document['getElementById'](_0x50c9f1(0x161)),dashboardPin=document[_0x50c9f1(0x137)](_0x50c9f1(0x116)),dashboardTopic=document[_0x50c9f1(0x137)](_0x50c9f1(0x16f)),closePollBtn=document[_0x50c9f1(0x137)](_0x50c9f1(0x18c)),chartCanvas=document[_0x50c9f1(0x137)]('vote-chart')['getContext']('2d'),adminLogoutBtn=document[_0x50c9f1(0x137)](_0x50c9f1(0x167)),adminLoginTrigger=document[_0x50c9f1(0x137)](_0x50c9f1(0x134)),adminLoginView=document[_0x50c9f1(0x137)](_0x50c9f1(0x170)),adminLoginCloseBtn=document[_0x50c9f1(0x137)](_0x50c9f1(0x163)),adminPasswordInput=document[_0x50c9f1(0x137)](_0x50c9f1(0x171)),adminLoginError=document[_0x50c9f1(0x137)](_0x50c9f1(0xfc)),adminLoginSubmitBtn=document[_0x50c9f1(0x137)](_0x50c9f1(0x169)),voterPinEntry=document['getElementById'](_0x50c9f1(0x186)),voterVotingArea=document['getElementById'](_0x50c9f1(0x13d)),voterMessageArea=document[_0x50c9f1(0x137)]('voter-message-area'),pinInput=document[_0x50c9f1(0x137)](_0x50c9f1(0x189)),joinPollBtn=document[_0x50c9f1(0x137)]('join-poll-btn'),voterError=document[_0x50c9f1(0x137)](_0x50c9f1(0xf4)),voterTopic=document[_0x50c9f1(0x137)](_0x50c9f1(0x12e)),voterOptionsContainer=document[_0x50c9f1(0x137)](_0x50c9f1(0x10f)),voterVoteError=document[_0x50c9f1(0x137)](_0x50c9f1(0x183)),voterMessageTitle=document[_0x50c9f1(0x137)](_0x50c9f1(0x14d)),voterMessageBody=document[_0x50c9f1(0x137)](_0x50c9f1(0x165)),voterBackPinBtn=document[_0x50c9f1(0x137)](_0x50c9f1(0x148));function showView(_0x4fbbd2){const _0x322d6f=_0x50c9f1;views[_0x322d6f(0x11d)](_0x29a479=>{const _0x27b148=_0x322d6f;_0x29a479[_0x27b148(0x121)][_0x27b148(0x14a)]=_0x29a479['id']===_0x4fbbd2?_0x27b148(0xf7):_0x27b148(0x10d),_0x4fbbd2===_0x27b148(0x170)&&(_0x29a479[_0x27b148(0x121)][_0x27b148(0x14a)]=_0x27b148(0x141));}),_0x4fbbd2!==_0x322d6f(0x170)&&(adminLoginView[_0x322d6f(0x121)][_0x322d6f(0x14a)]=_0x322d6f(0x10d));}function _0x5c6a(_0x1aad9c,_0x274163){const _0x5e508b=_0x5e50();return _0x5c6a=function(_0x5c6ad0,_0x28c753){_0x5c6ad0=_0x5c6ad0-0xf3;let _0x4f2b0e=_0x5e508b[_0x5c6ad0];return _0x4f2b0e;},_0x5c6a(_0x1aad9c,_0x274163);}function showVoterMessage(_0x4755c9,_0x4ad173,_0x573970=!![]){const _0x4a0e30=_0x50c9f1;voterMessageTitle['textContent']=_0x4755c9,voterMessageBody[_0x4a0e30(0x15c)]=_0x4ad173,voterPinEntry['style'][_0x4a0e30(0x14a)]=_0x4a0e30(0x10d),voterVotingArea[_0x4a0e30(0x121)][_0x4a0e30(0x14a)]=_0x4a0e30(0x10d),voterMessageArea[_0x4a0e30(0x121)][_0x4a0e30(0x14a)]='block',voterBackPinBtn[_0x4a0e30(0x121)][_0x4a0e30(0x14a)]=_0x573970?_0x4a0e30(0x168):'none';}function updateChart(_0x3a7e23,_0x2364be){const _0x2d06b5=_0x50c9f1;chartInstance&&chartInstance[_0x2d06b5(0x111)]();const _0x4993cc=_0x2364be,_0x5ebc92=_0x4993cc[_0x2d06b5(0x146)](_0x33bdf1=>_0x3a7e23[_0x33bdf1]||0x0),_0x3dbdc4=_0x4993cc['map']((_0x2d3720,_0x3fd394)=>{return colors[_0x3fd394%colors['length']];});chartInstance=new Chart(chartCanvas,{'type':'bar','data':{'labels':_0x4993cc,'datasets':[{'label':_0x2d06b5(0x103),'data':_0x5ebc92,'backgroundColor':_0x3dbdc4,'borderColor':_0x3dbdc4[_0x2d06b5(0x146)](_0x4c4a7a=>_0x4c4a7a),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'stepSize':0x1}}},'plugins':{'legend':{'display':![]}}}});}onAuthStateChanged(auth,_0x1d9eb0=>{const _0x2b4728=_0x50c9f1;_0x1d9eb0?(userId=_0x1d9eb0[_0x2b4728(0x187)],console[_0x2b4728(0x13b)](_0x2b4728(0x155),userId),showView('voter-view'),voterPinEntry[_0x2b4728(0x121)][_0x2b4728(0x14a)]=_0x2b4728(0xf7),voterVotingArea[_0x2b4728(0x121)][_0x2b4728(0x14a)]=_0x2b4728(0x10d),voterMessageArea[_0x2b4728(0x121)]['display']=_0x2b4728(0x10d)):handleSignIn();});async function handleSignIn(){const _0x2d35f3=_0x50c9f1;try{typeof __initial_auth_token!=='undefined'&&__initial_auth_token?(console[_0x2d35f3(0x13b)]('Signing\x20in\x20with\x20custom\x20token...'),await signInWithCustomToken(auth,__initial_auth_token)):(console[_0x2d35f3(0x13b)]('Signing\x20in\x20anonymously...'),await signInAnonymously(auth));}catch(_0x372714){console[_0x2d35f3(0x149)](_0x2d35f3(0xfd),_0x372714),loadingView['innerHTML']=_0x2d35f3(0x15a)+_0x372714[_0x2d35f3(0x18a)]+_0x2d35f3(0x17c);}}showView(_0x50c9f1(0x11b)),adminLoginTrigger[_0x50c9f1(0x18b)](_0x50c9f1(0x17e),()=>{const _0x54ba78=_0x50c9f1;adminLoginView['style']['display']=_0x54ba78(0x141),adminPasswordInput[_0x54ba78(0x145)]='',adminLoginError[_0x54ba78(0x15c)]='';}),adminLoginCloseBtn[_0x50c9f1(0x18b)](_0x50c9f1(0x17e),()=>{const _0x335626=_0x50c9f1;adminLoginView['style'][_0x335626(0x14a)]=_0x335626(0x10d);}),adminLoginSubmitBtn[_0x50c9f1(0x18b)]('click',()=>{const _0x417c0d=_0x50c9f1;adminPasswordInput['value']===ADMIN_PASSWORD?(adminLoginView[_0x417c0d(0x121)][_0x417c0d(0x14a)]=_0x417c0d(0x10d),showView(_0x417c0d(0x184)),adminCreatePoll[_0x417c0d(0x121)][_0x417c0d(0x14a)]=_0x417c0d(0xf7),adminDashboard['style'][_0x417c0d(0x14a)]=_0x417c0d(0x10d)):adminLoginError[_0x417c0d(0x15c)]=_0x417c0d(0x119);}),adminLogoutBtn['addEventListener'](_0x50c9f1(0x17e),()=>{const _0x215621=_0x50c9f1;showView(_0x215621(0x101)),voterPinEntry['style'][_0x215621(0x14a)]=_0x215621(0xf7),voterVotingArea[_0x215621(0x121)][_0x215621(0x14a)]=_0x215621(0x10d),voterMessageArea['style'][_0x215621(0x14a)]=_0x215621(0x10d);}),document[_0x50c9f1(0x137)]('voter-back-pin-btn')[_0x50c9f1(0x18b)](_0x50c9f1(0x17e),()=>{const _0x5e7458=_0x50c9f1;voterPinEntry['style'][_0x5e7458(0x14a)]=_0x5e7458(0xf7),voterVotingArea[_0x5e7458(0x121)][_0x5e7458(0x14a)]=_0x5e7458(0x10d),voterMessageArea['style'][_0x5e7458(0x14a)]=_0x5e7458(0x10d),pinInput[_0x5e7458(0x145)]='',voterError[_0x5e7458(0x15c)]='';});const MAX_CUSTOM_OPTIONS=0x28;pollTypeSelect[_0x50c9f1(0x18b)]('change',_0x5fdafd=>{const _0x4278ce=_0x50c9f1;_0x5fdafd[_0x4278ce(0x14f)][_0x4278ce(0x145)]===_0x4278ce(0x17f)?customOptionsContainer[_0x4278ce(0x159)][_0x4278ce(0x11c)](_0x4278ce(0x12c)):customOptionsContainer['classList'][_0x4278ce(0x13a)](_0x4278ce(0x12c));}),startPollBtn[_0x50c9f1(0x18b)]('click',async()=>{const _0x214284=_0x50c9f1,_0x29a3dd=pollTopicInput[_0x214284(0x145)][_0x214284(0x136)](),_0x4d4a45=pollTypeSelect[_0x214284(0x145)],_0x2af11f=voteRestrictionSelect[_0x214284(0x145)];let _0x80c224=[],_0x41e695={};adminError[_0x214284(0x15c)]='',adminError['classList']['remove'](_0x214284(0x151)),adminError[_0x214284(0x159)][_0x214284(0x13a)](_0x214284(0x182));if(!_0x29a3dd){adminError[_0x214284(0x15c)]=_0x214284(0x12a);return;}if(_0x4d4a45===_0x214284(0x107))_0x80c224=[_0x214284(0x104),_0x214284(0x15b)];else{if(_0x4d4a45===_0x214284(0x17f)){_0x80c224=customOptionsTextarea[_0x214284(0x145)][_0x214284(0x178)]('\x0a')['map'](_0x1ead5a=>_0x1ead5a[_0x214284(0x136)]())['filter'](_0x41b9a3=>_0x41b9a3[_0x214284(0x179)]>0x0);if(_0x80c224[_0x214284(0x179)]<0x2){adminError[_0x214284(0x15c)]=_0x214284(0xfa)+MAX_CUSTOM_OPTIONS+_0x214284(0x115);return;}if(_0x80c224[_0x214284(0x179)]>MAX_CUSTOM_OPTIONS){adminError[_0x214284(0x15c)]=_0x214284(0x127)+MAX_CUSTOM_OPTIONS+'\x20ตัวเลือก';return;}}}_0x80c224[_0x214284(0x11d)](_0x39127c=>{_0x41e695[_0x39127c]=0x0;});const _0xe9be16=Math[_0x214284(0x157)](0x3e8+Math[_0x214284(0x13c)]()*0x2328)[_0x214284(0x16e)]();currentAdminSessionPath=_0x214284(0x147)+appId+_0x214284(0x176)+_0xe9be16;const _0x25be9b={'pin':_0xe9be16,'topic':_0x29a3dd,'options':_0x80c224,'votes':_0x41e695,'isActive':!![],'voteRestriction':_0x2af11f};_0x2af11f===_0x214284(0x174)&&(_0x25be9b['voters']=[]);try{await setDoc(doc(db,currentAdminSessionPath),_0x25be9b),dashboardPin[_0x214284(0x15c)]=_0xe9be16,dashboardTopic['textContent']=_0x29a3dd,adminCreatePoll['style'][_0x214284(0x14a)]=_0x214284(0x10d),adminDashboard['style'][_0x214284(0x14a)]=_0x214284(0xf7),listenToAdminSession(currentAdminSessionPath);}catch(_0x3d597e){console[_0x214284(0x149)]('Error\x20creating\x20poll:',_0x3d597e),adminError['textContent']='เกิดข้อผิดพลาดในการสร้างโหวต';}}),closePollBtn[_0x50c9f1(0x18b)](_0x50c9f1(0x17e),async()=>{const _0x27414e=_0x50c9f1;if(!currentAdminSessionPath)return;try{await updateDoc(doc(db,currentAdminSessionPath),{'isActive':![]});}catch(_0x17bad6){console[_0x27414e(0x149)]('Error\x20closing\x20poll:',_0x17bad6);}}),joinPollBtn[_0x50c9f1(0x18b)]('click',async()=>{const _0x131325=_0x50c9f1,_0x2556aa=pinInput[_0x131325(0x145)]['trim']();voterError['textContent']='';if(_0x2556aa[_0x131325(0x179)]!==0x4){voterError['textContent']=_0x131325(0x160);return;}const _0x3f21bf=_0x131325(0x147)+appId+'/public/data/voting_sessions/'+_0x2556aa;try{const _0x153098=await getDoc(doc(db,_0x3f21bf));if(_0x153098[_0x131325(0x16a)]()&&_0x153098[_0x131325(0x177)]()[_0x131325(0x13f)])currentVoterSessionPath=_0x3f21bf,voterPinEntry[_0x131325(0x121)][_0x131325(0x14a)]=_0x131325(0x10d),voterVotingArea[_0x131325(0x121)][_0x131325(0x14a)]=_0x131325(0xf7),voterMessageArea[_0x131325(0x121)][_0x131325(0x14a)]=_0x131325(0x10d),listenToVoterSession(_0x3f21bf);else _0x153098[_0x131325(0x16a)]()&&!_0x153098['data']()['isActive']?voterError[_0x131325(0x15c)]=_0x131325(0x117):voterError[_0x131325(0x15c)]=_0x131325(0x153);}catch(_0x3150a4){console[_0x131325(0x149)](_0x131325(0xf8),_0x3150a4),voterError[_0x131325(0x15c)]=_0x131325(0x11f);}});function listenToAdminSession(_0x3ee68e){currentAdminListener&&currentAdminListener(),currentAdminListener=onSnapshot(doc(db,_0x3ee68e),_0x311801=>{const _0x203cba=_0x5c6a;if(_0x311801['exists']()&&_0x311801[_0x203cba(0x177)]()[_0x203cba(0x13f)]){const _0x3341d3=_0x311801[_0x203cba(0x177)]();updateChart(_0x3341d3['votes'],_0x3341d3[_0x203cba(0xfb)]);}else currentAdminListener&&(currentAdminListener(),currentAdminListener=null),currentAdminSessionPath=null,chartInstance&&(chartInstance['destroy'](),chartInstance=null),adminError[_0x203cba(0x15c)]=_0x203cba(0x193),adminError['classList'][_0x203cba(0x11c)](_0x203cba(0x182)),adminError[_0x203cba(0x159)]['add'](_0x203cba(0x151)),adminCreatePoll[_0x203cba(0x121)][_0x203cba(0x14a)]=_0x203cba(0xf7),adminDashboard[_0x203cba(0x121)][_0x203cba(0x14a)]=_0x203cba(0x10d),pollTopicInput[_0x203cba(0x145)]='',customOptionsTextarea[_0x203cba(0x145)]='',customOptionsContainer[_0x203cba(0x159)]['add'](_0x203cba(0x12c)),pollTypeSelect[_0x203cba(0x145)]=_0x203cba(0x107),voteRestrictionSelect[_0x203cba(0x145)]=_0x203cba(0x174);});}function listenToVoterSession(_0x53da80){currentVoterListener&&currentVoterListener(),currentVoterListener=onSnapshot(doc(db,_0x53da80),_0x22ef94=>{const _0x1a520d=_0x5c6a;if(!_0x22ef94['exists']()){if(currentVoterListener)currentVoterListener();showVoterMessage(_0x1a520d(0x12b),'รอบโหวตนี้ถูกปิดโดยผู้ดูแลแล้ว',!![]);return;}const _0x4a5bc8=_0x22ef94[_0x1a520d(0x177)]();if(!_0x4a5bc8[_0x1a520d(0x13f)]){if(currentVoterListener)currentVoterListener();showVoterMessage(_0x1a520d(0x133),'ผู้ดูแลได้ปิดรอบโหวตนี้แล้ว\x20ขอบคุณที่เข้าร่วม',!![]);return;}if(_0x4a5bc8[_0x1a520d(0x12d)]===_0x1a520d(0x174)&&_0x4a5bc8['voters']&&_0x4a5bc8[_0x1a520d(0x164)]['includes'](userId)){showVoterMessage('โหวตสำเร็จ!',_0x1a520d(0x150),![]);return;}voterTopic[_0x1a520d(0x15c)]=_0x4a5bc8[_0x1a520d(0xf5)],voterVoteError[_0x1a520d(0x15c)]='',voterOptionsContainer[_0x1a520d(0x17b)]='',_0x4a5bc8['options'][_0x1a520d(0x11d)]((_0x536d18,_0x37d75e)=>{const _0x32c3ce=_0x1a520d,_0x328766=document[_0x32c3ce(0x125)]('button');_0x328766[_0x32c3ce(0x15c)]=_0x536d18;const _0x12d1aa=colors[_0x37d75e%colors[_0x32c3ce(0x179)]];_0x328766[_0x32c3ce(0x11a)]='w-full\x20text-white\x20p-4\x20rounded-lg\x20font-semibold\x20text-lg\x20transition\x20duration-300\x20shadow-md\x20voter-option-btn',_0x328766[_0x32c3ce(0x121)][_0x32c3ce(0x16d)]=_0x12d1aa,_0x328766[_0x32c3ce(0x121)][_0x32c3ce(0x109)]=_0x12d1aa,_0x328766[_0x32c3ce(0x121)][_0x32c3ce(0x14e)]=_0x32c3ce(0x16b),_0x328766[_0x32c3ce(0x18b)](_0x32c3ce(0x118),()=>_0x328766[_0x32c3ce(0x121)][_0x32c3ce(0x16d)]=darkenColor(_0x12d1aa,0xa)),_0x328766[_0x32c3ce(0x18b)](_0x32c3ce(0x15f),()=>_0x328766[_0x32c3ce(0x121)][_0x32c3ce(0x16d)]=_0x12d1aa),_0x328766['addEventListener']('click',()=>handleVote(_0x536d18,_0x4a5bc8[_0x32c3ce(0x12d)])),voterOptionsContainer[_0x32c3ce(0x188)](_0x328766);});});}function darkenColor(_0x1d4fba,_0x13b50f){const _0x42a656=_0x50c9f1;var _0x448fed=parseInt(_0x1d4fba[_0x42a656(0x123)](0x1),0x10),_0x4f8a39=_0x13b50f<0x0?0x0:0xff,_0x58e745=_0x13b50f<0x0?_0x13b50f*-0x1:_0x13b50f,_0x3c51c0=_0x448fed>>0x10,_0x77518a=_0x448fed>>0x8&0xff,_0x3b4fea=_0x448fed&0xff;return'#'+(0x1000000+(Math[_0x42a656(0x194)]((_0x4f8a39-_0x3c51c0)*_0x58e745)+_0x3c51c0)*0x10000+(Math[_0x42a656(0x194)]((_0x4f8a39-_0x77518a)*_0x58e745)+_0x77518a)*0x100+(Math[_0x42a656(0x194)]((_0x4f8a39-_0x3b4fea)*_0x58e745)+_0x3b4fea))['toString'](0x10)[_0x42a656(0x123)](0x1);}async function handleVote(_0x304b35,_0x397573){const _0x2428f9=_0x50c9f1;voterVoteError['textContent']='',document['querySelectorAll'](_0x2428f9(0x124))[_0x2428f9(0x11d)](_0x2b1783=>{const _0x38f911=_0x2428f9;_0x2b1783[_0x38f911(0x110)]=!![],_0x2b1783['classList']['add']('opacity-50','cursor-not-allowed');});try{const _0x4db962=doc(db,currentVoterSessionPath),_0x1348f7='votes.'+_0x304b35,_0x494259={[_0x1348f7]:increment(0x1)};_0x397573===_0x2428f9(0x174)&&(_0x494259[_0x2428f9(0x164)]=arrayUnion(userId)),await updateDoc(_0x4db962,_0x494259),_0x397573===_0x2428f9(0x181)&&showVoterMessage(_0x2428f9(0x14c),'ขอบคุณที่ส่งคะแนนโหวต\x20(เครื่องนี้สามารถใช้โหวตคนถัดไปได้)',!![]);}catch(_0x29de67){console['error'](_0x2428f9(0x156),_0x29de67),document[_0x2428f9(0x126)]('.voter-option-btn')[_0x2428f9(0x11d)](_0x4fc976=>{const _0xb39982=_0x2428f9;_0x4fc976[_0xb39982(0x110)]=![],_0x4fc976[_0xb39982(0x159)][_0xb39982(0x11c)](_0xb39982(0x172),_0xb39982(0xf3));}),voterVoteError[_0x2428f9(0x15c)]=_0x2428f9(0x142);}}
