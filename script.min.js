const _0x2a76e2=_0x4ca8;(function(_0x433b52,_0x154964){const _0x11c105=_0x4ca8,_0x50b0bd=_0x433b52();while(!![]){try{const _0x182a16=parseInt(_0x11c105(0xf6))/0x1*(parseInt(_0x11c105(0xa6))/0x2)+-parseInt(_0x11c105(0x95))/0x3+parseInt(_0x11c105(0xbe))/0x4*(parseInt(_0x11c105(0x91))/0x5)+parseInt(_0x11c105(0xe6))/0x6+parseInt(_0x11c105(0x7b))/0x7+-parseInt(_0x11c105(0x97))/0x8*(parseInt(_0x11c105(0x89))/0x9)+-parseInt(_0x11c105(0xd1))/0xa;if(_0x182a16===_0x154964)break;else _0x50b0bd['push'](_0x50b0bd['shift']());}catch(_0x343750){_0x50b0bd['push'](_0x50b0bd['shift']());}}}(_0x5ed8,0x86160));import{initializeApp}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';import{getAuth,signInAnonymously,signInWithCustomToken,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';import{getFirestore,doc,setDoc,getDoc,updateDoc,onSnapshot,increment,arrayUnion,setLogLevel}from'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';const userProvidedConfig=_0x2a76e2(0xd8),firebaseConfig=JSON[_0x2a76e2(0xb0)](typeof __firebase_config!==_0x2a76e2(0xbd)?__firebase_config:userProvidedConfig),appId=typeof __app_id!==_0x2a76e2(0xbd)?__app_id:_0x2a76e2(0xf0),app=initializeApp(firebaseConfig),db=getFirestore(app),auth=getAuth(app);setLogLevel(_0x2a76e2(0x86));let userId=null,currentAdminSessionPath=null,currentAdminListener=null,currentVoterSessionPath=null,currentVoterListener=null,chartInstance=null;const ADMIN_PASSWORD='2741',colors=[_0x2a76e2(0x8b),'#F56565',_0x2a76e2(0xc8),_0x2a76e2(0x96),'#9F7AEA',_0x2a76e2(0x92),_0x2a76e2(0x76),_0x2a76e2(0xa2),'#667EEA',_0x2a76e2(0x98),_0x2a76e2(0xef),'#D69E2E',_0x2a76e2(0x75),_0x2a76e2(0xbb),_0x2a76e2(0x90),_0x2a76e2(0xce),'#6B46C1',_0x2a76e2(0x101),'#3F729B',_0x2a76e2(0x69),_0x2a76e2(0x6c),_0x2a76e2(0x80),'#5BBFBA',_0x2a76e2(0xc6),_0x2a76e2(0xaa),_0x2a76e2(0xfa),_0x2a76e2(0xe3),_0x2a76e2(0x71),_0x2a76e2(0x87),_0x2a76e2(0xcb),_0x2a76e2(0x109),_0x2a76e2(0xd7),_0x2a76e2(0xcd),'#B38E8E','#93A8AC','#E3AF86',_0x2a76e2(0xe9),_0x2a76e2(0xee),_0x2a76e2(0xaf),_0x2a76e2(0x88)],views=document['querySelectorAll'](_0x2a76e2(0xa9)),loadingView=document[_0x2a76e2(0xa8)](_0x2a76e2(0xea)),adminView=document['getElementById'](_0x2a76e2(0xb3)),voterView=document['getElementById'](_0x2a76e2(0x8d)),adminCreatePoll=document['getElementById'](_0x2a76e2(0xbf)),adminDashboard=document[_0x2a76e2(0xa8)](_0x2a76e2(0x81)),pollTopicInput=document[_0x2a76e2(0xa8)](_0x2a76e2(0x9d)),pollTypeSelect=document[_0x2a76e2(0xa8)](_0x2a76e2(0xfb)),voteRestrictionSelect=document[_0x2a76e2(0xa8)](_0x2a76e2(0xb7)),customOptionsContainer=document[_0x2a76e2(0xa8)](_0x2a76e2(0xfc)),customOptionsTextarea=document['getElementById'](_0x2a76e2(0x6f)),startPollBtn=document[_0x2a76e2(0xa8)](_0x2a76e2(0x105)),adminError=document[_0x2a76e2(0xa8)](_0x2a76e2(0xdc)),dashboardPin=document['getElementById']('dashboard-pin'),dashboardTopic=document[_0x2a76e2(0xa8)](_0x2a76e2(0xa0)),closePollBtn=document[_0x2a76e2(0xa8)](_0x2a76e2(0xe8)),chartCanvas=document[_0x2a76e2(0xa8)](_0x2a76e2(0xff))[_0x2a76e2(0x83)]('2d'),adminLogoutBtn=document[_0x2a76e2(0xa8)](_0x2a76e2(0x8f)),adminLoginTrigger=document[_0x2a76e2(0xa8)](_0x2a76e2(0xe5)),adminLoginView=document[_0x2a76e2(0xa8)](_0x2a76e2(0xdf)),adminLoginCloseBtn=document['getElementById'](_0x2a76e2(0xcf)),adminPasswordInput=document[_0x2a76e2(0xa8)](_0x2a76e2(0x6e)),adminLoginError=document['getElementById']('admin-login-error'),adminLoginSubmitBtn=document[_0x2a76e2(0xa8)]('admin-login-submit-btn'),voterPinEntry=document[_0x2a76e2(0xa8)](_0x2a76e2(0xfd)),voterVotingArea=document['getElementById']('voter-voting-area'),voterMessageArea=document[_0x2a76e2(0xa8)]('voter-message-area'),pinInput=document[_0x2a76e2(0xa8)](_0x2a76e2(0x77)),joinPollBtn=document[_0x2a76e2(0xa8)]('join-poll-btn'),voterError=document['getElementById'](_0x2a76e2(0xeb)),voterTopic=document[_0x2a76e2(0xa8)](_0x2a76e2(0x102)),voterOptionsContainer=document[_0x2a76e2(0xa8)](_0x2a76e2(0x10d)),voterVoteError=document['getElementById'](_0x2a76e2(0x72)),voterMessageTitle=document['getElementById'](_0x2a76e2(0xb2)),voterMessageBody=document[_0x2a76e2(0xa8)](_0x2a76e2(0xed));function _0x4ca8(_0x2e46a0,_0x358c29){const _0x5ed88a=_0x5ed8();return _0x4ca8=function(_0x4ca865,_0x5a86a0){_0x4ca865=_0x4ca865-0x68;let _0x3d9099=_0x5ed88a[_0x4ca865];return _0x3d9099;},_0x4ca8(_0x2e46a0,_0x358c29);}function showView(_0x5024e5){const _0x4fd5e2=_0x2a76e2;views[_0x4fd5e2(0x94)](_0x4d59fc=>{const _0xe6f0ec=_0x4fd5e2;_0x4d59fc[_0xe6f0ec(0x82)]['display']=_0x4d59fc['id']===_0x5024e5?_0xe6f0ec(0xe7):_0xe6f0ec(0x7a),_0x5024e5===_0xe6f0ec(0xdf)&&(_0x4d59fc[_0xe6f0ec(0x82)][_0xe6f0ec(0x85)]='flex');}),_0x5024e5!==_0x4fd5e2(0xdf)&&(adminLoginView[_0x4fd5e2(0x82)][_0x4fd5e2(0x85)]=_0x4fd5e2(0x7a));}function showVoterMessage(_0x5867d0,_0x261c9d){const _0x21eb5b=_0x2a76e2;voterMessageTitle['textContent']=_0x5867d0,voterMessageBody[_0x21eb5b(0x9a)]=_0x261c9d,voterPinEntry[_0x21eb5b(0x82)]['display']='none',voterVotingArea[_0x21eb5b(0x82)][_0x21eb5b(0x85)]=_0x21eb5b(0x7a),voterMessageArea['style'][_0x21eb5b(0x85)]=_0x21eb5b(0xe7);}function updateChart(_0x160af7,_0xa756d4){const _0xf543c5=_0x2a76e2;chartInstance&&chartInstance['destroy']();const _0x26e5f0=_0xa756d4,_0x38da50=_0x26e5f0[_0xf543c5(0xd6)](_0x136844=>_0x160af7[_0x136844]||0x0),_0x29251b=_0x26e5f0[_0xf543c5(0xd6)]((_0xe2e46f,_0x2606ad)=>{const _0x17b7e3=_0xf543c5;return colors[_0x2606ad%colors[_0x17b7e3(0xcc)]];});chartInstance=new Chart(chartCanvas,{'type':_0xf543c5(0xfe),'data':{'labels':_0x26e5f0,'datasets':[{'label':_0xf543c5(0x103),'data':_0x38da50,'backgroundColor':_0x29251b,'borderColor':_0x29251b[_0xf543c5(0xd6)](_0x2b3f49=>_0x2b3f49),'borderWidth':0x1}]},'options':{'responsive':!![],'maintainAspectRatio':![],'scales':{'y':{'beginAtZero':!![],'ticks':{'stepSize':0x1}}},'plugins':{'legend':{'display':![]}}}});}onAuthStateChanged(auth,_0x5a963c=>{const _0x3ef2c1=_0x2a76e2;_0x5a963c?(userId=_0x5a963c[_0x3ef2c1(0xc7)],console[_0x3ef2c1(0xc5)](_0x3ef2c1(0xc2),userId),showView('voter-view'),voterPinEntry[_0x3ef2c1(0x82)][_0x3ef2c1(0x85)]=_0x3ef2c1(0xe7),voterVotingArea[_0x3ef2c1(0x82)][_0x3ef2c1(0x85)]='none',voterMessageArea[_0x3ef2c1(0x82)][_0x3ef2c1(0x85)]=_0x3ef2c1(0x7a)):handleSignIn();});async function handleSignIn(){const _0x335ff=_0x2a76e2;try{typeof __initial_auth_token!==_0x335ff(0xbd)&&__initial_auth_token?(console[_0x335ff(0xc5)](_0x335ff(0xbc)),await signInWithCustomToken(auth,__initial_auth_token)):(console[_0x335ff(0xc5)](_0x335ff(0x10c)),await signInAnonymously(auth));}catch(_0x5c8547){console[_0x335ff(0xda)](_0x335ff(0x107),_0x5c8547),loadingView[_0x335ff(0xdd)]='<h1\x20class=\x22text-2xl\x20font-bold\x20text-red-600\x22>Authentication\x20Failed</h1><p>'+_0x5c8547[_0x335ff(0xf3)]+_0x335ff(0xa4);}}showView(_0x2a76e2(0xea)),adminLoginTrigger['addEventListener']('click',()=>{const _0x19ef9c=_0x2a76e2;adminLoginView[_0x19ef9c(0x82)][_0x19ef9c(0x85)]=_0x19ef9c(0x7d),adminPasswordInput['value']='',adminLoginError['textContent']='';}),adminLoginCloseBtn['addEventListener'](_0x2a76e2(0xca),()=>{const _0x25d0ed=_0x2a76e2;adminLoginView['style'][_0x25d0ed(0x85)]='none';}),adminLoginSubmitBtn['addEventListener'](_0x2a76e2(0xca),()=>{const _0x535f92=_0x2a76e2;adminPasswordInput[_0x535f92(0x100)]===ADMIN_PASSWORD?(adminLoginView[_0x535f92(0x82)][_0x535f92(0x85)]=_0x535f92(0x7a),showView(_0x535f92(0xb3)),adminCreatePoll[_0x535f92(0x82)][_0x535f92(0x85)]='block',adminDashboard[_0x535f92(0x82)][_0x535f92(0x85)]=_0x535f92(0x7a)):adminLoginError[_0x535f92(0x9a)]=_0x535f92(0xc9);}),adminLogoutBtn[_0x2a76e2(0x10b)](_0x2a76e2(0xca),()=>{const _0x7dbadc=_0x2a76e2;showView(_0x7dbadc(0x8d)),voterPinEntry[_0x7dbadc(0x82)][_0x7dbadc(0x85)]='block',voterVotingArea[_0x7dbadc(0x82)][_0x7dbadc(0x85)]=_0x7dbadc(0x7a),voterMessageArea['style'][_0x7dbadc(0x85)]=_0x7dbadc(0x7a);}),document[_0x2a76e2(0xa8)](_0x2a76e2(0xad))[_0x2a76e2(0x10b)](_0x2a76e2(0xca),()=>{const _0x386167=_0x2a76e2;voterPinEntry[_0x386167(0x82)][_0x386167(0x85)]=_0x386167(0xe7),voterVotingArea['style']['display']=_0x386167(0x7a),voterMessageArea[_0x386167(0x82)][_0x386167(0x85)]=_0x386167(0x7a),pinInput[_0x386167(0x100)]='',voterError['textContent']='';});const MAX_CUSTOM_OPTIONS=0x28;pollTypeSelect[_0x2a76e2(0x10b)](_0x2a76e2(0xe4),_0x5e3b53=>{const _0x3dd6af=_0x2a76e2;_0x5e3b53['target'][_0x3dd6af(0x100)]==='custom'?customOptionsContainer['classList'][_0x3dd6af(0xd5)]('hidden'):customOptionsContainer[_0x3dd6af(0xe0)][_0x3dd6af(0x8a)]('hidden');}),startPollBtn['addEventListener']('click',async()=>{const _0x5c093f=_0x2a76e2,_0x4ee617=pollTopicInput['value'][_0x5c093f(0x9f)](),_0x3daf0d=pollTypeSelect[_0x5c093f(0x100)],_0x24d98b=voteRestrictionSelect[_0x5c093f(0x100)];let _0x1ac247=[],_0x1abb99={};adminError['textContent']='',adminError['classList'][_0x5c093f(0xd5)](_0x5c093f(0x70)),adminError[_0x5c093f(0xe0)][_0x5c093f(0x8a)](_0x5c093f(0xb6));if(!_0x4ee617){adminError[_0x5c093f(0x9a)]='กรุณาใส่หัวข้อโหวต';return;}if(_0x3daf0d==='yes-no')_0x1ac247=[_0x5c093f(0xae),_0x5c093f(0xf8)];else{if(_0x3daf0d===_0x5c093f(0xa3)){_0x1ac247=customOptionsTextarea[_0x5c093f(0x100)]['split']('\x0a')[_0x5c093f(0xd6)](_0x30f6ce=>_0x30f6ce[_0x5c093f(0x9f)]())[_0x5c093f(0xc1)](_0x3f7ebe=>_0x3f7ebe['length']>0x0);if(_0x1ac247[_0x5c093f(0xcc)]<0x2){adminError[_0x5c093f(0x9a)]=_0x5c093f(0xa7)+MAX_CUSTOM_OPTIONS+_0x5c093f(0xe1);return;}if(_0x1ac247[_0x5c093f(0xcc)]>MAX_CUSTOM_OPTIONS){adminError[_0x5c093f(0x9a)]=_0x5c093f(0xb4)+MAX_CUSTOM_OPTIONS+_0x5c093f(0xd9);return;}}}_0x1ac247[_0x5c093f(0x94)](_0x2e983f=>{_0x1abb99[_0x2e983f]=0x0;});const _0x44ae6c=Math[_0x5c093f(0xc4)](0x3e8+Math[_0x5c093f(0xba)]()*0x2328)[_0x5c093f(0x7e)]();currentAdminSessionPath=_0x5c093f(0xd2)+appId+_0x5c093f(0xdb)+_0x44ae6c;const _0x426284={'pin':_0x44ae6c,'topic':_0x4ee617,'options':_0x1ac247,'votes':_0x1abb99,'isActive':!![],'voteRestriction':_0x24d98b};_0x24d98b===_0x5c093f(0xf1)&&(_0x426284[_0x5c093f(0x99)]=[]);try{await setDoc(doc(db,currentAdminSessionPath),_0x426284),dashboardPin[_0x5c093f(0x9a)]=_0x44ae6c,dashboardTopic[_0x5c093f(0x9a)]=_0x4ee617,adminCreatePoll[_0x5c093f(0x82)][_0x5c093f(0x85)]=_0x5c093f(0x7a),adminDashboard[_0x5c093f(0x82)]['display']=_0x5c093f(0xe7),listenToAdminSession(currentAdminSessionPath);}catch(_0x28053b){console[_0x5c093f(0xda)]('Error\x20creating\x20poll:',_0x28053b),adminError['textContent']=_0x5c093f(0x68);}}),closePollBtn[_0x2a76e2(0x10b)](_0x2a76e2(0xca),async()=>{if(!currentAdminSessionPath)return;try{await updateDoc(doc(db,currentAdminSessionPath),{'isActive':![]});}catch(_0x17b294){console['error']('Error\x20closing\x20poll:',_0x17b294);}}),joinPollBtn['addEventListener'](_0x2a76e2(0xca),async()=>{const _0x1ad53e=_0x2a76e2,_0x220301=pinInput[_0x1ad53e(0x100)][_0x1ad53e(0x9f)]();voterError[_0x1ad53e(0x9a)]='';if(_0x220301['length']!==0x4){voterError['textContent']=_0x1ad53e(0xa1);return;}const _0x464250=_0x1ad53e(0xd2)+appId+_0x1ad53e(0xdb)+_0x220301;try{const _0x219d16=await getDoc(doc(db,_0x464250));if(_0x219d16[_0x1ad53e(0xd4)]()&&_0x219d16[_0x1ad53e(0x6b)]()['isActive'])currentVoterSessionPath=_0x464250,voterPinEntry[_0x1ad53e(0x82)][_0x1ad53e(0x85)]=_0x1ad53e(0x7a),voterVotingArea[_0x1ad53e(0x82)]['display']=_0x1ad53e(0xe7),voterMessageArea[_0x1ad53e(0x82)][_0x1ad53e(0x85)]=_0x1ad53e(0x7a),listenToVoterSession(_0x464250);else _0x219d16[_0x1ad53e(0xd4)]()&&!_0x219d16['data']()['isActive']?voterError[_0x1ad53e(0x9a)]=_0x1ad53e(0x104):voterError[_0x1ad53e(0x9a)]=_0x1ad53e(0x8c);}catch(_0x48730d){console['error'](_0x1ad53e(0x7f),_0x48730d),voterError['textContent']=_0x1ad53e(0xb1);}});function listenToAdminSession(_0x59f515){currentAdminListener&&currentAdminListener(),currentAdminListener=onSnapshot(doc(db,_0x59f515),_0x406e26=>{const _0x2ecc8b=_0x4ca8;if(_0x406e26[_0x2ecc8b(0xd4)]()&&_0x406e26[_0x2ecc8b(0x6b)]()[_0x2ecc8b(0x108)]){const _0x22f91a=_0x406e26[_0x2ecc8b(0x6b)]();updateChart(_0x22f91a['votes'],_0x22f91a[_0x2ecc8b(0x79)]);}else currentAdminListener&&(currentAdminListener(),currentAdminListener=null),currentAdminSessionPath=null,chartInstance&&(chartInstance[_0x2ecc8b(0x10a)](),chartInstance=null),adminError[_0x2ecc8b(0x9a)]=_0x2ecc8b(0x84),adminError[_0x2ecc8b(0xe0)][_0x2ecc8b(0xd5)](_0x2ecc8b(0xb6)),adminError[_0x2ecc8b(0xe0)][_0x2ecc8b(0x8a)](_0x2ecc8b(0x70)),adminCreatePoll['style'][_0x2ecc8b(0x85)]=_0x2ecc8b(0xe7),adminDashboard[_0x2ecc8b(0x82)][_0x2ecc8b(0x85)]='none',pollTopicInput['value']='',customOptionsTextarea[_0x2ecc8b(0x100)]='',customOptionsContainer['classList'][_0x2ecc8b(0x8a)](_0x2ecc8b(0xf7)),pollTypeSelect[_0x2ecc8b(0x100)]=_0x2ecc8b(0xc0),voteRestrictionSelect[_0x2ecc8b(0x100)]=_0x2ecc8b(0x78);});}function _0x5ed8(){const _0x1d5cc7=['#4299E1','ไม่พบ\x20PIN\x20นี้\x20หรือรอบโหวตปิดแล้ว','voter-view','votes.','admin-logout-btn','#4FD1C5','19340nvsjFG','#ED8936','voteRestriction','forEach','339192vwWtlg','#ECC94B','133696tEKGpi','#E53E3E','voters','textContent','0\x204px\x206px\x20-1px\x20rgba(0,\x200,\x200,\x200.1),\x200\x202px\x204px\x20-1px\x20rgba(0,\x200,\x200,\x200.06),\x20inset\x200\x20-3px\x200\x20rgba(0,0,0,0.2)','boxShadow','poll-topic','button','trim','dashboard-topic','PIN\x20ต้องมี\x204\x20หลัก','#F6AD55','custom','</p>','Error\x20casting\x20vote:','1107842OHPduT','กรุณากำหนดตัวเลือกอย่างน้อย\x202\x20ข้อ\x20(สูงสุด\x20','getElementById','.view','#9D6C5B','disabled','ผู้ดูแลได้ปิดรอบโหวตนี้แล้ว\x20ขอบคุณที่เข้าร่วม','voter-back-pin-btn','เห็นด้วย','#B3C8CC','parse','เกิดข้อผิดพลาดในการเชื่อมต่อ','voter-message-title','admin-view','กำหนดตัวเลือกได้สูงสุด\x20','mouseenter','text-red-500','vote-restriction','รอบโหวตสิ้นสุดลง','โหวตสำเร็จ!','random','#D53F8C','Signing\x20in\x20with\x20custom\x20token...','undefined','396gqhVPM','admin-create-poll','yes-no','filter','User\x20authenticated\x20with\x20UID:','cursor-not-allowed','floor','log','#F7B75F','uid','#48BB78','รหัสผ่านไม่ถูกต้อง','click','#E27857','length','#8C8C8C','#F6E05E','admin-login-close-btn','round','2123170fhdPDL','/artifacts/','w-full\x20text-white\x20p-4\x20rounded-lg\x20font-semibold\x20text-lg\x20transition\x20duration-300\x20shadow-md\x20voter-option-btn','exists','remove','map','#F9D896','{\x22apiKey\x22:\x22AIzaSyBHmJ7M5qf20lKPTB9_aE2Ppa0-jTryuuI\x22,\x22authDomain\x22:\x22programpp-91f08.firebaseapp.com\x22,\x22projectId\x22:\x22programpp-91f08\x22,\x22storageBucket\x22:\x22programpp-91f08.firebasestorage.app\x22,\x22messagingSenderId\x22:\x22415403943738\x22,\x22appId\x22:\x221:415403943738:web:f56ec72de49f81f0315203\x22,\x22measurementId\x22:\x22G-W19QNQQR25\x22}','\x20ตัวเลือก','error','/public/data/voting_sessions/','admin-error','innerHTML','คุณได้ส่งคะแนนโหวตของคุณในรอบนี้แล้ว','admin-login-view','classList','\x20ตัวเลือก)','querySelectorAll','#7FB7BE','change','admin-login-trigger','5900004jKgPCZ','block','close-poll-btn','#A1B0AB','loading-view','voter-error','includes','voter-message-body','#D79F9F','#38B2AC','default-app-id','single','รอบโหวตนี้ถูกปิดโดยผู้ดูแลแล้ว','message','.voter-option-btn','borderColor','1DpBgou','hidden','ไม่เห็นด้วย','slice','#D05353','poll-type','custom-options-container','voter-pin-entry','bar','vote-chart','value','#C53030','voter-topic','จำนวนโหวต','รอบโหวตนี้ปิดไปแล้ว','start-poll-btn','opacity-50','Authentication\x20Error:','isActive','#8FC0A9','destroy','addEventListener','Signing\x20in\x20anonymously...','voter-options-container','เกิดข้อผิดพลาดในการสร้างโหวต','#F3AD74','รอบโหวตปิดแล้ว','data','#9F80A0','เกิดข้อผิดพลาดในการส่งโหวต\x20กรุณาลองอีกครั้ง','admin-password','custom-options-textarea','text-blue-500','#F8C87A','voter-vote-error','ขอบคุณที่ส่งคะแนนโหวต\x20(เครื่องนี้สามารถใช้โหวตคนถัดไปได้)','backgroundColor','#805AD5','#A0AEC0','pin-input','multiple','options','none','167846vPxYLf','createElement','flex','toString','Error\x20joining\x20poll:','#EB4966','admin-dashboard','style','getContext','รอบโหวตสิ้นสุดลงแล้ว','display','debug','#C79D9D','#FDD5B1','576hqgMEC','add'];_0x5ed8=function(){return _0x1d5cc7;};return _0x5ed8();}function listenToVoterSession(_0x320dbc){currentVoterListener&&currentVoterListener(),currentVoterListener=onSnapshot(doc(db,_0x320dbc),_0x5d64d5=>{const _0x19caf6=_0x4ca8;if(!_0x5d64d5[_0x19caf6(0xd4)]()){if(currentVoterListener)currentVoterListener();showVoterMessage(_0x19caf6(0xb8),_0x19caf6(0xf2));return;}const _0x565ce4=_0x5d64d5[_0x19caf6(0x6b)]();if(!_0x565ce4[_0x19caf6(0x108)]){if(currentVoterListener)currentVoterListener();showVoterMessage(_0x19caf6(0x6a),_0x19caf6(0xac));return;}if(_0x565ce4[_0x19caf6(0x93)]===_0x19caf6(0xf1)&&_0x565ce4[_0x19caf6(0x99)]&&_0x565ce4[_0x19caf6(0x99)][_0x19caf6(0xec)](userId)){showVoterMessage('โหวตสำเร็จ!',_0x19caf6(0xde));return;}voterTopic[_0x19caf6(0x9a)]=_0x565ce4['topic'],voterVoteError[_0x19caf6(0x9a)]='',voterOptionsContainer[_0x19caf6(0xdd)]='',_0x565ce4['options'][_0x19caf6(0x94)]((_0x57a4da,_0xfdfcd9)=>{const _0x26aec4=_0x19caf6,_0x212a82=document[_0x26aec4(0x7c)](_0x26aec4(0x9e));_0x212a82[_0x26aec4(0x9a)]=_0x57a4da;const _0x28f092=colors[_0xfdfcd9%colors[_0x26aec4(0xcc)]];_0x212a82['className']=_0x26aec4(0xd3),_0x212a82[_0x26aec4(0x82)]['backgroundColor']=_0x28f092,_0x212a82[_0x26aec4(0x82)][_0x26aec4(0xf5)]=_0x28f092,_0x212a82[_0x26aec4(0x82)][_0x26aec4(0x9c)]=_0x26aec4(0x9b),_0x212a82[_0x26aec4(0x10b)](_0x26aec4(0xb5),()=>_0x212a82[_0x26aec4(0x82)][_0x26aec4(0x74)]=darkenColor(_0x28f092,0xa)),_0x212a82[_0x26aec4(0x10b)]('mouseleave',()=>_0x212a82[_0x26aec4(0x82)][_0x26aec4(0x74)]=_0x28f092),_0x212a82[_0x26aec4(0x10b)](_0x26aec4(0xca),()=>handleVote(_0x57a4da,_0x565ce4[_0x26aec4(0x93)])),voterOptionsContainer['appendChild'](_0x212a82);});});}function darkenColor(_0x32acaa,_0x5be578){const _0x20f737=_0x2a76e2;var _0x745076=parseInt(_0x32acaa[_0x20f737(0xf9)](0x1),0x10),_0x324b23=_0x5be578<0x0?0x0:0xff,_0x41a335=_0x5be578<0x0?_0x5be578*-0x1:_0x5be578,_0x4c0fa3=_0x745076>>0x10,_0x273f10=_0x745076>>0x8&0xff,_0x41821a=_0x745076&0xff;return'#'+(0x1000000+(Math['round']((_0x324b23-_0x4c0fa3)*_0x41a335)+_0x4c0fa3)*0x10000+(Math[_0x20f737(0xd0)]((_0x324b23-_0x273f10)*_0x41a335)+_0x273f10)*0x100+(Math[_0x20f737(0xd0)]((_0x324b23-_0x41821a)*_0x41a335)+_0x41821a))[_0x20f737(0x7e)](0x10)[_0x20f737(0xf9)](0x1);}async function handleVote(_0x2c1ea3,_0x3c75f1){const _0x4a658a=_0x2a76e2;voterVoteError[_0x4a658a(0x9a)]='',document[_0x4a658a(0xe2)](_0x4a658a(0xf4))[_0x4a658a(0x94)](_0x28c182=>{const _0x583ece=_0x4a658a;_0x28c182[_0x583ece(0xab)]=!![],_0x28c182[_0x583ece(0xe0)][_0x583ece(0x8a)](_0x583ece(0x106),_0x583ece(0xc3));});try{const _0x39f562=doc(db,currentVoterSessionPath),_0x522046=_0x4a658a(0x8e)+_0x2c1ea3,_0xff6dc5={[_0x522046]:increment(0x1)};_0x3c75f1===_0x4a658a(0xf1)&&(_0xff6dc5[_0x4a658a(0x99)]=arrayUnion(userId)),await updateDoc(_0x39f562,_0xff6dc5),_0x3c75f1===_0x4a658a(0x78)&&showVoterMessage(_0x4a658a(0xb9),_0x4a658a(0x73));}catch(_0x48b74e){console[_0x4a658a(0xda)](_0x4a658a(0xa5),_0x48b74e),document['querySelectorAll'](_0x4a658a(0xf4))[_0x4a658a(0x94)](_0x370a87=>{const _0x1073b2=_0x4a658a;_0x370a87['disabled']=![],_0x370a87['classList'][_0x1073b2(0xd5)](_0x1073b2(0x106),_0x1073b2(0xc3));}),voterVoteError[_0x4a658a(0x9a)]=_0x4a658a(0x6d);}}